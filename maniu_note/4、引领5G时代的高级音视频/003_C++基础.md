# C++基础

> 从语法上看，C语言是 C++ 的一部分，学了C语言就相当于学了 C++ 的一半。

## 类的定义及调用

```c++
#include <iostream>

class Student {
public:
    char *name;
    int age;
    float score;

    void say() {
        printf("name %s age %d score %f\n", name, age, score);
    }
};

int main() {
    class Student stu{};
    stu.name = "xiaoping";
    stu.age = 15;
    stu.score = 92.5f;
    stu.say();
    return 0;
}
```

## 命名空间

```c++
namespace namespaceA {
    namespace namespaceB {
        struct Teacher {
            int age = 30;
        };
    }
    int a = 10;
}

int main() {
    int a = namespaceA::a;

    using namespace namespaceA;
    int c = a;

    using namespace namespaceA::namespaceB;
    Teacher teacher;

    return 0;
}
```

## cin和cout

```c++
#include <iostream>

using namespace std;

int main() {
    // 输出流 cout <<
    // endl: 作用相当于 flush()，并会换行
    cout << "Hello, World!" << endl;

    cout << "hello, ";
    cout << "World!";
    cout << endl;

    cout << "hello, "
         << "World!"
         << endl;

    // 输入流 cin >>
    // 定义三个变量，并从输入流中接收。
    // 输入一个数值后，回车，接收下一个数值
    //
    // 控制台打印如下：
    // h
    // 67
    // 4724723
    // a = h
    // b = 67
    // c = 4.72472e+06
    char a;
    int b;
    float c;
    cin >> a >> b >> c;
    cout << "a = " << a << endl
         << "b = " << b << endl
         << "c = " << c << endl;

    return 0;
}
```

## 引用

### 引用是什么

```c++
#include <iostream>

int main() {
    // 引用：就是某一变量的一个别名，对引用的操作与对变量直接操作完全一样。
    // 引用不会开辟内存空间，所以相对于指针更为省空间
    // & 在等于号前表示 引用
    int a = 10;
    int &b = a;
    b = 100;

    printf("a: %d \n", a);
    printf("b: %d \n", b);
    printf("a: %p \n", &a);
    printf("b: %p \n", &b);

    // 常量引用不能被修改
    int const &c = a;
    // c = b;

    return 0;
}
```

### 引用实现两数交换

```c++
#include <iostream>

using namespace std;

// 引用实现两数交换
void swap(int &p1, int &p2) {
    int p = p1;
    p1 = p2;
    p2 = p;
}

int main() {
    int a = 20, b = 40;
    cout << "a = " << a << ", b = " << b << endl;
    swap(a, b);
    cout << "a = " << a << ", b = " << b << endl;

    return 0;
}
```

### 引用作为返回值

```c++
#include <iostream>

using namespace std;

float temp;

float &fn2(float r) {
    temp = (float) (r * r * 3.14);
    return temp;
}

float &fn1(float r) {
    // 1) 如果函数返回是&，内部不可以直接 return (float)(r*r*3.14)
    //    因为返回值为引用类型，而这样的返回是 float 类型
    // 2) 可以这样返回：float &b = a; return b;
    // 3) 也可以直接返回：return a; (因为编译器会自动把该值转换成引用)
    // 4) 变量 a 必须为全局变量，否则一旦走出该函数的作用域，变量 a 便不存在，同样 a 的引用也不存在
    float a = (float) (r * r * 3.14);
    return a;
}

int main() {
    // 错误：虽然有值，但值是错误的
    float &f1 = fn1(100.0);
    cout << "错误举例：" << f1 << endl;// 错误举例：2.1577e+20

    // 正确
     float &f2 = fn2(100.0);
    cout << "正确举例：" << f2 << endl;// 正确举例：31400

    // 正确
    float f3 = fn2(100.0);
    cout << "正确举例：" << f3 << endl;// 正确举例：31400
}
```

### 引用作为返回值2

```c++
#include <iostream>

using namespace std;

int data[10];
int error = -1;

int &put(int n) {
    if (n >= 0 && n <= 9) {
        return data[n];
        // 相当于如下：
        // int &d = data[n];
        // return d;
    } else {
        cout << "subscript error";
        return error;
    }
}

int main() {
    put(0) = 10;// 等价于 data[0] = 10
    put(9) = 20;// 等价于 data[9] = 20;

    cout << "data[0] = " << data[0] << endl;// data[0] = 10
    cout << "data[9] = " << data[9] << endl;// data[9] = 20
}
```